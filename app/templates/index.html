<!-- index.html: página principal -->

{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="row justify-content-center">
	<div class="col-md-8">
		<div class="card shadow mb-4">
			<div class="card-body">
				<h2 class="card-title text-center mb-4">Mis tareas</h2>
				<form method="POST" action="{{ url_for('tasks.add_task') }}" class="mb-4">
					<div class="input-group">
						<input type="text" name="description" class="form-control" placeholder="Nueva tarea" required>
						<button class="btn btn-success" type="submit">Agregar</button>
					</div>
				</form>
				<ul class="list-group mb-2">
					{% for task in tasks %}
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span class="fs-5">{{ task.description }}</span>
						<div>
							<form method="POST" action="{{ url_for('tasks.complete_task', task_id=task.id) }}" style="display:inline;">
								<button class="btn btn-sm btn-outline-primary">Completar</button>
							</form>
							<form method="POST" action="{{ url_for('tasks.delete_task', task_id=task.id) }}" style="display:inline;">
								<button class="btn btn-sm btn-outline-danger">Eliminar</button>
							</form>
						</div>
					</li>
					{% else %}
					<li class="list-group-item text-center">No tienes tareas aún.</li>
					{% endfor %}
				</ul>
			</div>
		</div>

		<div class="card shadow">
			<div class="card-body">
				<h3 class="card-title text-center mb-4">Historial de tareas completadas</h3>
				<ul class="list-group">
					{% for task in completed_tasks %}
					<li class="list-group-item d-flex justify-content-between align-items-center list-group-item-success">
						<span class="fs-6"><s>{{ task.description }}</s></span>
						<div class="d-flex align-items-center">
							<form method="POST" action="{{ url_for('tasks.reopen_task', task_id=task.id) }}" style="display:inline;">
								<button class="btn btn-sm btn-outline-warning me-2">Reabrir</button>
							</form>
							<small class="text-muted">{{ task.created_at }}</small>
						</div>
					</li>
					{% else %}
					<li class="list-group-item text-center">No tienes tareas completadas aún.</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
</div>
{% endblock %}
